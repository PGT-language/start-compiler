; Этот файл содержит вспомогательные функции, используемые в других модулях компилятора

section .data
    ; Здесь могут быть определены строки и константы

section .text
    global str_len
    global str_copy
    global int_to_str

; Функция для вычисления длины строки
; Вход: адрес строки в rdi
; Выход: длина строки в rax
str_len:
    xor rax, rax          ; Обнуляем rax для подсчета длины
.loop:
    cmp byte [rdi + rax], 0 ; Проверяем конец строки
    je .done               ; Если конец строки, выходим
    inc rax               ; Увеличиваем длину
    jmp .loop             ; Повторяем
.done:
    ret                   ; Возвращаем длину в rax

; Функция для копирования строки
; Вход: адрес источника в rdi, адрес назначения в rsi
str_copy:
    .copy_loop:
        mov al, [rdi]    ; Копируем байт из источника
        mov [rsi], al    ; Записываем в назначение
        test al, al      ; Проверяем, является ли байт нулем
        jz .done_copy     ; Если ноль, выходим
        inc rdi          ; Переходим к следующему байту источника
        inc rsi          ; Переходим к следующему байту назначения
        jmp .copy_loop    ; Повторяем
.done_copy:
    ret                   ; Возвращаемся

; Функция для преобразования целого числа в строку
; Вход: целое число в rdi, адрес строки в rsi
int_to_str:
    ; Реализация преобразования целого числа в строку
    ret                   ; Возвращаемся